{"version":3,"sources":["../../src/forms/formUtils.js"],"names":["isAReactEl","isAFormEl","isAFormGroup","getFormElementNames","getFormData","pickValidation","omitValidation","filterValidation","el","Children","toArray","isValidElement","child","type","name","WrappedComponent","children","map","element","props","refs","getKeyVal","reduce","prev","current","Object","assign","keys","rules","messages","validation"],"mappings":"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","file":"formUtils.js","sourcesContent":["import React from 'react';\nimport includes from 'lodash/includes';\nimport find from 'lodash/find';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport formElementFromReact from './formElement/formElementFromReact';\n\nexport function isAReactEl(el = '') {\n  return !!(find(React.Children.toArray(el), child => React.isValidElement(child)));\n}\n\nexport function isAFormEl({ type }) {\n  return includes([\n    'input', 'textarea', 'select'\n  ], type);\n}\n\nexport function isAFormGroup({ type }) {\n  if (typeof type === 'function' && type.name === 'Connect') {\n    return type.WrappedComponent.name === 'FormGroup';\n  }\n\n  return false;\n}\n\nexport function getFormElementNames(children) {\n  return React.Children.map(children, (element) => {\n    if (!isAReactEl(element)) {\n      return null;\n    }\n\n    if (isAFormEl(element)) {\n      return element.props.name;\n    }\n\n    if (isAReactEl(element.props.children)) {\n      return getFormElementNames(element.props.children);\n    }\n\n    return null;\n  });\n}\n\nexport function getFormData(children, refs) {\n  return React.Children.map(children, (element) => {\n    if (!isAReactEl(element)) {\n      return null;\n    }\n\n    if (isAFormEl(element)) {\n      return formElementFromReact(element, refs).getKeyVal();\n    }\n\n    if (isAReactEl(element.props.children)) {\n      return getFormData(element.props.children, refs);\n    }\n\n    return null;\n  }).reduce((prev, current) => Object.assign({}, prev, current), {});\n}\n\nexport function pickValidation({ rules, messages }, keys) {\n  return {\n    rules: pick(rules, keys),\n    messages: pick(messages, keys)\n  };\n}\n\nexport function omitValidation({ rules, messages }, keys) {\n  return {\n    rules: omit(rules, keys),\n    messages: omit(messages, keys)\n  };\n}\n\nexport function filterValidation({ validation, children }) {\n  return pickValidation(validation, getFormElementNames(children));\n}\n"]}