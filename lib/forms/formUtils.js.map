{"version":3,"sources":["../../src/forms/formUtils.js"],"names":["includes","pick","omit","isAReactEl","isAFormEl","isAFormGroup","getFormElementNames","getFormData","pickValidation","omitValidation","filterValidation","array","val","indexOf","obj","keys","Object","filter","key","map","reduce","prev","curr","assign","el","Children","toArray","isValidElement","child","type","name","WrappedComponent","displayName","children","element","props","refs","getKeyVal","current","rules","messages","validation"],"mappings":"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","file":"formUtils.js","sourcesContent":["import React from 'react';\nimport formElementFromReact from './formElement/formElementFromReact';\n\nexport function includes(array, val) {\n  return array.indexOf(val) > -1;\n}\n\nexport function pick(obj, keys) {\n  return Object.keys(obj)\n    .filter(key => includes(keys, key))\n    .map(key => ({ [key]: obj[key] }))\n    .reduce((prev, curr) => Object.assign(prev, curr), {});\n}\n\nexport function omit(obj, keys) {\n  return Object.keys(obj)\n    .filter(key => !includes(keys, key))\n    .map(key => ({ [key]: obj[key] }))\n    .reduce((prev, curr) => Object.assign(prev, curr), {});\n}\n\nexport function isAReactEl(el = '') {\n  return !!(React.Children.toArray(el).filter(child => React.isValidElement(child))[0]);\n}\n\nexport function isAFormEl({ type }) {\n  return includes([\n    'input', 'textarea', 'select'\n  ], type);\n}\n\nexport function isAFormGroup({ type }) {\n  if (typeof type === 'function' && type.name === 'Connect') {\n    return type.WrappedComponent.displayName === 'FormGroup';\n  }\n\n  return false;\n}\n\nexport function getFormElementNames(children) {\n  return React.Children.map(children, (element) => {\n    if (!isAReactEl(element)) {\n      return null;\n    }\n\n    if (isAFormEl(element)) {\n      return element.props.name;\n    }\n\n    if (isAReactEl(element.props.children)) {\n      return getFormElementNames(element.props.children);\n    }\n\n    return null;\n  });\n}\n\nexport function getFormData(children, refs) {\n  return React.Children.map(children, (element) => {\n    if (!isAReactEl(element)) {\n      return null;\n    }\n\n    if (isAFormEl(element)) {\n      return formElementFromReact(element, refs).getKeyVal();\n    }\n\n    if (isAReactEl(element.props.children)) {\n      return getFormData(element.props.children, refs);\n    }\n\n    return null;\n  }).reduce((prev, current) => Object.assign({}, prev, current), {});\n}\n\nexport function pickValidation({ rules, messages }, keys) {\n  return {\n    rules: pick(rules, keys),\n    messages: pick(messages, keys)\n  };\n}\n\nexport function omitValidation({ rules, messages }, keys) {\n  return {\n    rules: omit(rules, keys),\n    messages: omit(messages, keys)\n  };\n}\n\nexport function filterValidation({ validation, children }) {\n  return pickValidation(validation, getFormElementNames(children));\n}\n"]}